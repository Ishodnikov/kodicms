<?php defined('SYSPATH') or die('No direct access allowed.');class Controller_API_Plugins extends Controller_System_API{	public function rest_get()	{		$plugins = array();				foreach (Plugins::find_all() as $plugin)		{			$p = $plugin->as_array();			if($plugin->enabled())			{				$p['status'] = TRUE;			}			$plugins[] = $p;		}				$this->response($plugins);	}		public function rest_put()	{		$plugin_data = json_decode($this->request->body());		Plugins::find_all();		$plugin = Plugins::get_registered( $plugin_data->id );		if ( $plugin_data->status === TRUE )		{			Plugins::activate( $plugin_data->id );		}		else		{			Plugins::deactivate( $plugin_data->id );		}				$plugin = $plugin->as_array();		$plugin['status'] = $plugin_data->status;		Kohana::cache('Database::cache(plugins_list)', NULL, -1);				$this->response($plugin);	}	}